# üßæ Log Analyzer

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ª–æ–≥–æ–≤ nginx, –ø–æ–¥—Å—á—ë—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ `URL` –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ `HTML-–æ—Ç—á—ë—Ç–∞`.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω [`uv`](https://github.com/astral-sh/uv):

```bash
git clone https://github.com/vasevooo/otus_python_professional.git
cd otus_python_professional
uv pip install -e .
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Makefile

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `Makefile` —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏:

| –ö–æ–º–∞–Ω–¥–∞             | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                      |
|---------------------|-------------------------------------------------|
| `make install`      | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`uv`)                |
| `make install-dev`  | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`uv`)            |
| `make run`          | –ó–∞–ø—É—Å–∫–∞–µ—Ç –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ª–æ–≥–æ–≤                      |
| `make test`*        | –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã (`pytest`)                      |
| `make lint`*        | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∏–ª—å –∫–æ–¥–∞ (`ruff`)                   |
| `make mypy`*        | –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ (`mypy`)               |
| `make clean`        | –£–¥–∞–ª—è–µ—Ç `__pycache__`, `.pyc` –∏ –∫–µ—à–∏            |

\* –ö–æ–º–∞–Ω–¥—ã –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ `*` —Ç—Ä–µ–±—É—é—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:  
```bash
make install-dev
```

–ü—Ä–∏–º–µ—Ä—ã:

```bash
make install
make run
make test
```

##  –ó–∞–ø—É—Å–∫ (–±–µ–∑ `MakeFile`)

```
python src/log_analyzer/main.py --config configs/log_analyzer.yaml
```

## [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](../../configs/log_analyzer.yaml)

| –û–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-------------|---------|
| `REPORT_SIZE` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ URL, –≤–∫–ª—é—á–∞–µ–º—ã—Ö –≤ –æ—Ç—á–µ—Ç | 100 |
| `REPORT_DIR` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≥–¥–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –æ—Ç—á–µ—Ç—ã | `reports` |
| `LOG_DIR` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–≥–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ | `data` |
| `LOG_FILE` | –ü—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞, –∫—É–¥–∞ –ø–∏—Å–∞—Ç—å –ª–æ–≥–∏ —Å–∫—Ä–∏–ø—Ç–∞ | `logs/log.log` |

### –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```json
{
    "REPORT_SIZE": 100,
    "REPORT_DIR": "reports",
    "LOG_DIR": "data",
    "LOG_FILE": "logs/log.log"
}
```


## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑  `Makefile`)
```
pytest tests/
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥–∞ –ª–æ–≥ –ø–∏—à–µ—Ç –≤ `stdout` –≤ —á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ (`ConsoleRenderer`)
- –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `JSON` (–≤ —Ñ–∞–π–ª, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω `LOG_FILE`)
- –õ–æ–≥–∏ –º–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç–∞–º–∏ –≤—Ä–æ–¥–µ `jq`

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `.gz` –ª–æ–≥–æ–≤
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ —Å sortable-—Ç–∞–±–ª–∏—Ü–µ–π
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –æ–Ω —É–∂–µ –µ—Å—Ç—å
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –±–∞–∑–µ src/, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `pyproject.toml`
